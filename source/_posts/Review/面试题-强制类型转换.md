---
title: 面试题 强制类型转换
comments: true
date: 2019-04-10 10:30:00
categories:
tags:
---

1. 下面的代码运行结果是什么
```JavaScript
console.log(1 +  "2" + "2");  // 122
// 1 + "2" 是执行的第一个操作。由于其中一个运算对象 "2" 是字符串，JavaScript会假设它需要执行字符串连接，因此，会将  1 的类转换为 "1"  ，  1+"2" 结果就是 "12" 。然后， "12"+"2" 就是 "122" 。


console.log(1 +  +"2" + "2");  // 32
// 根据运算的顺序，要执行的第一个运算是 +"2" （第一个 "2" 前面的额外 + 被视为一元运算符）。因此，JavaScript将 "2" 的类型转换为数字，然后应用一元 + 号（即将其视为一个正数）。其结果就是得到一个数字 2 ，接下来的运算就是 1 + 2 ，这当然是 3。


console.log(1 +  -"1" + "2");  // 02
// 这里的解释和前一个例子相同，不同的地方是此处的一元运算符是 - 而不是 + 。先是 "1" 变为 1 ，然后当应用 - 时又变为了 -1 ，然后将其与 1 相加，结果为 0 ，再将其转换为字符串，连接最后的  "2"  运算对象，得到 "02" 。


console.log(+"1" +  "1" + "2");  // 112
// 虽然第一个运算对象  "1" 因为前缀的一元 + 运算符类型转换为数值，但当连接到第二个运算对象 "1" 的时候，又立即转换回字符串，然后又和最后的运算对象 "2"  连接，产生了字符串  "112" 。


console.log( "A" - "B" + "2");  // NaN2
// 由于运算符 - 不能被应用于字符串，并且 "A" 和 "B" 都不能转换成数值，因此， "A" - "B" 的结果是 NaN  ，然后再和字符串 "2"  连接，得到 "NaN2" 

console.log( "A" - "B" + 2);  // NaN
// 参见前一个例子， "A" - "B" 结果为 NaN 。但是，应用任何运算符到 NaN 与其他任何的数字运算对象，结果仍然是 NaN 。

```

2. ({}+{}).length
```JavaScript
解析：
1、数+数 = 数（int float）
2、数+null = 数
3、数+其他数据类型 = string （强制转换成string 再相加）
4、其他数据类型 + 其他数据类型 = string(强制转换成string 再相加)
答案：({}+{}).length 等价于 ({}.toString() + {}.toString()).length，{}.toString()的值为[object Object]，所以最后结果为30。
```

3. 设置对象的属性会字符串化参数值
```JavaScript
var a={}, b={key:'b'}, c={key:'c'};

a[b]=123;
a[c]=456;

console.log(a[b]);  // 456
// JavaScript在设置对象的属性的时候，会暗中字符串化参数值。在这里例子中，由于 b 和 c都是对象，把它们设置为对象a的参数，它们都将被转换为 "[object Object]"  。结果就是， a[b] 和 a[c] 都相当 "[object Object]"  ，而后者会将前者的值覆盖。因此，设置或引用 a[c] 和设置或引用 a[b] 完全相同。所以得到的答案是  456  。
```

4. 运算顺序和强制类型转换
```JavaScript
[1 < 2 < 3, 3 < 2 < 1]

// 大于、小于都是从左往右运算。1 < 2 为 true， true再强制转换为 1， 1 < 3 为true。 同理 3 < 2 为 false， false再强制转换为 0， 0 < 1 为true。 答案为 [true, true]。
```
